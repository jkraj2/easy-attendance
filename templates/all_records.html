{% extends "base.html" %}
{% block title %}Global Attendance Records{% endblock %}

{% block content %}

<center><h3>ðŸ“‹ Global Attendance Records</h3></center>

<!-- Filters -->
<div class="controls">
  <input type="search" id="searchInput" placeholder="Search (name, note, status, date)">
  <select id="statusFilter">
    <option value="ALL">All Status</option>
    <option value="Present">Present</option>
    <option value="Absent">Absent</option>
    <option value="Half-Day">Half-Day</option>
    <option value="PL">PL</option>
    <option value="SL">SL</option>
    <option value="Comp-Off">Comp-Off</option>
    <option value="Week-Off">Week-Off</option>
  </select>
  <select id="nameFilter">
    <option value="ALL">All Employees</option>
  </select>
  <label>From</label><input type="date" id="fromDate">
  <label>To</label><input type="date" id="toDate">
  <button class="btn btn-secondary btn-sm" id="clearFilters">Clear</button>
  <div style="margin-left:auto;">
    <button class="btn btn-primary btn-export" id="exportCsv">CSV</button>
    <button class="btn btn-success btn-export" id="exportExcel">Excel</button>
    <button class="btn btn-danger btn-export" id="exportPdf">PDF</button>
  </div>
</div>

<!-- Summary -->
<div class="summary" id="summaryBox">
  <div class="pill">Total: <span id="totalCount">0</span></div>
  <div class="pill">Present: <span id="countPresent">0</span></div>
  <div class="pill">Absent: <span id="countAbsent">0</span></div>
  <div class="pill">Half-Day: <span id="countHalf">0</span></div>
  <div class="pill">PL/SL/Comp-Off: <span id="countOther">0</span></div>
</div>

<!-- Attendance Table -->
<div class="table-responsive">
  <table class="att-table" id="recordsTable">
    <thead>
      <tr>
        <th>Date</th>
        <th>Name</th>
        <th>Status</th>
        <th>Shift</th>
        <th>More Options</th>
        <th>Leave</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
</div>

{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
<script src="{{ url_for('static', filename='all_records.js') }}"></script>
{% endblock %}
